{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/core-types.ts","../../src/core-utils.ts","../../src/core-resizing.ts","../../src/core.ts","../../src/core-react.ts","../../src/components/Centered.tsx","../../src/components/CenteredVertically.tsx","../../src/components/Space.tsx","../../src/components/Anchored.tsx","../../src/components/Custom.tsx","../../src/components/Fill.tsx","../../src/components/Fixed.tsx","../../src/components/Layer.tsx","../../src/components/Positioned.tsx","../../src/components/SpaceInfo.tsx","../../src/components/ViewPort.tsx","../../src/components/Options.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export enum Type {\r\n\tViewPort = \"viewport\",\r\n\tFixed = \"fixed\",\r\n\tFill = \"fill\",\r\n\tPositioned = \"positioned\",\r\n\tAnchored = \"anchored\",\r\n\tCustom = \"custom\",\r\n}\r\n\r\nexport enum AnchorType {\r\n\tLeft = \"anchor-left\",\r\n\tRight = \"anchor-right\",\r\n\tTop = \"anchor-top\",\r\n\tBottom = \"anchor-bottom\",\r\n}\r\n\r\nexport enum Orientation {\r\n\tHorizontal,\r\n\tVertical,\r\n}\r\n\r\nexport type SizeUnit = number | string | undefined;\r\n\r\nexport enum ResizeType {\r\n\tLeft = \"resize-left\",\r\n\tRight = \"resize-right\",\r\n\tTop = \"resize-top\",\r\n\tBottom = \"resize-bottom\",\r\n\tNW = \"resize-nw\",\r\n\tNE = \"resize-ne\",\r\n\tSW = \"resize-sw\",\r\n\tSE = \"resize-se\",\r\n}\r\n\r\nexport enum ResizeHandlePlacement {\r\n\tOverlayInside = \"overlay-inside\",\r\n\tInside = \"inside\",\r\n\tOverlayBoundary = \"overlay-boundary\",\r\n}\r\n\r\nexport enum CenterType {\r\n\tNone = \"none\",\r\n\tVertical = \"vertical\",\r\n\tHorizontalVertical = \"horizontalVertical\",\r\n}\r\n\r\nexport interface IPassThroughEvents {\r\n\tonClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonDoubleClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseDown?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseEnter?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseLeave?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseMove?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchMove?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchEnd?: (event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface ICommonProps extends IPassThroughEvents {\r\n\tid?: string;\r\n\tclassName?: string;\r\n\tstyle?: React.CSSProperties;\r\n\tas?: string;\r\n\tcenterContent?: CenterType;\r\n\tzIndex?: number;\r\n\tscrollable?: boolean;\r\n\ttrackSize?: boolean;\r\n}\r\n\r\nexport interface ISpaceProps extends ICommonProps {\r\n\ttype: Type;\r\n\tanchor?: AnchorType | undefined;\r\n\torder?: number | undefined;\r\n\tposition?: IPositionalProps | undefined;\r\n\thandleSize?: number | undefined;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\ttouchHandleSize?: number | undefined;\r\n\tminimumSize?: number | undefined;\r\n\tmaximumSize?: number | undefined;\r\n\tonResizeStart?: (() => void | boolean) | undefined;\r\n\tonResizeEnd?: ((newSize: SizeUnit, domRect: DOMRect) => void) | undefined;\r\n}\r\n\r\nexport interface ISpaceStore {\r\n\tgetSpaces: () => ISpaceDefinition[];\r\n\tgetSpace: (id: string) => ISpaceDefinition | undefined;\r\n\taddSpace: (space: ISpaceDefinition) => void;\r\n\tupdateSpace: (space: ISpaceDefinition, props: ISpaceProps) => void;\r\n\tupdateStyles: (space: ISpaceDefinition) => void;\r\n\tremoveSpace: (space: ISpaceDefinition) => void;\r\n\tcreateSpace: (parent: string | undefined, props: ISpaceProps, update: () => void) => ISpaceDefinition;\r\n\tstartMouseResize: (resizeType: ResizeType, space: ISpaceDefinition, size: ISize, event: React.MouseEvent<HTMLElement>) => void;\r\n\tstartTouchResize: (resizeType: ResizeType, space: ISpaceDefinition, size: ISize, event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface IPosition {\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n}\r\n\r\nexport interface IPositionalProps extends IPosition {\r\n\tleftResizable?: boolean;\r\n\ttopResizable?: boolean;\r\n\trightResizable?: boolean;\r\n\tbottomResizable?: boolean;\r\n}\r\n\r\nexport interface ISize {\r\n\tsize: SizeUnit;\r\n\tadjusted: SizeUnit[];\r\n\tresized: number;\r\n}\r\n\r\nexport interface ISpaceDefinition {\r\n\tupdate: () => void;\r\n\tupdateParent: () => void;\r\n\tadjustLeft: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustRight: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustTop: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustBottom: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustEdge: (adjusted: SizeUnit[]) => boolean;\r\n\tanchoredChildren: (children: ISpaceDefinition[], anchor: AnchorType, zIndex: number) => ISpaceDefinition[];\r\n\tonResizeStart?: (() => void | boolean) | undefined;\r\n\tonResizeEnd?: ((newSize: SizeUnit, domRect: DOMRect) => void) | undefined;\r\n\telement: HTMLElement;\r\n\tid: string;\r\n\ttype: Type;\r\n\tanchor?: AnchorType;\r\n\torientation: Orientation;\r\n\tscrollable: boolean;\r\n\torder?: number;\r\n\tposition: \"fixed\" | \"absolute\" | \"relative\";\r\n\tchildren: ISpaceDefinition[];\r\n\tparentId: string | undefined;\r\n\tstore: ISpaceStore;\r\n\tleft: ISize;\r\n\ttop: ISize;\r\n\tright: ISize;\r\n\tbottom: ISize;\r\n\twidth: ISize;\r\n\theight: ISize;\r\n\tzIndex: number;\r\n\tdimension: DOMRect;\r\n\tcenterContent: \"none\" | \"vertical\" | \"horizontalVertical\";\r\n\tresizing: boolean;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\thandleSize: number;\r\n\ttouchHandleSize: number;\r\n\thandlePlacement: ResizeHandlePlacement;\r\n\tcanResizeTop: boolean;\r\n\tcanResizeLeft: boolean;\r\n\tcanResizeRight: boolean;\r\n\tcanResizeBottom: boolean;\r\n}\r\n","import { ISpaceDefinition, SizeUnit, ISize, ResizeHandlePlacement } from \"./core-types\";\r\n\r\nexport function shortuuid() {\r\n\tlet firstPart = (Math.random() * 46656) | 0;\r\n\tlet secondPart = (Math.random() * 46656) | 0;\r\n\treturn (\"000\" + firstPart.toString(36)).slice(-3) + (\"000\" + secondPart.toString(36)).slice(-3);\r\n}\r\n\r\nexport function getSizeString(size: SizeUnit) {\r\n\treturn typeof size === \"string\" ? size : `${size}px`;\r\n}\r\n\r\nexport function css(size: ISize, dontAddCalc?: boolean) {\r\n\tif (size.size === 0 && size.adjusted.length === 0 && size.resized === 0) {\r\n\t\treturn `0px`;\r\n\t}\r\n\r\n\tconst parts: string[] = [];\r\n\tif (size.size !== undefined) {\r\n\t\tparts.push(getSizeString(size.size));\r\n\t}\r\n\r\n\tsize.adjusted.forEach((l) => parts.push(getSizeString(l)));\r\n\r\n\tif (size.resized !== 0) {\r\n\t\tparts.push(getSizeString(size.resized));\r\n\t}\r\n\r\n\tif (parts.length === 0) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tif (parts.length === 1) {\r\n\t\treturn parts[0];\r\n\t}\r\n\r\n\tif (dontAddCalc) {\r\n\t\treturn parts.join(\" + \");\r\n\t}\r\n\r\n\treturn `calc(${parts.join(\" + \")})`;\r\n}\r\n\r\nexport function coalesce<T>(...args: T[]) {\r\n\treturn args.find((x) => x !== null && x !== undefined);\r\n}\r\n\r\nexport function adjustmentsEqual(item1: SizeUnit[], item2: SizeUnit[]) {\r\n\tif (item1.length !== item2.length) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (var i = 0, len = item1.length; i < len; i++) {\r\n\t\tif (item1[i] !== item2[i]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function throttle<F extends (...args: any) => any>(callback: F, limit: number) {\r\n\tvar wait = false; // Initially, we're not waiting\r\n\treturn function(...args: any) {\r\n\t\t// We return a throttled function\r\n\t\tif (!wait) {\r\n\t\t\t// If we're not waiting\r\n\t\t\tcallback(...args); // Execute users function\r\n\t\t\twait = true; // Prevent future invocations\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t// After a period of time\r\n\t\t\t\twait = false; // And allow future invocations\r\n\t\t\t}, limit);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function styleDefinition(space: ISpaceDefinition) {\r\n\tconst cssElements: string[] = [];\r\n\r\n\tconst style: React.CSSProperties = {\r\n\t\tposition: space.position,\r\n\t\tleft: css(space.left),\r\n\t\ttop: css(space.top),\r\n\t\tright: css(space.right),\r\n\t\tbottom: css(space.bottom),\r\n\t\twidth: css(space.width),\r\n\t\theight: css(space.height),\r\n\t\tzIndex: space.zIndex,\r\n\t};\r\n\r\n\tconst cssString: string[] = [];\r\n\r\n\tif (style.position) {\r\n\t\tcssString.push(`position: ${style.position};`);\r\n\t}\r\n\tif (style.left) {\r\n\t\tcssString.push(`left: ${style.left};`);\r\n\t}\r\n\tif (style.top) {\r\n\t\tcssString.push(`top: ${style.top};`);\r\n\t}\r\n\tif (style.right) {\r\n\t\tcssString.push(`right: ${style.right};`);\r\n\t}\r\n\tif (style.bottom) {\r\n\t\tcssString.push(`bottom: ${style.bottom};`);\r\n\t}\r\n\tif (style.width) {\r\n\t\tcssString.push(`width: ${style.width};`);\r\n\t}\r\n\tif (style.height) {\r\n\t\tcssString.push(`height: ${style.height};`);\r\n\t}\r\n\tif (style.zIndex) {\r\n\t\tcssString.push(`z-index: ${style.zIndex};`);\r\n\t}\r\n\r\n\tif (cssString.length > 0) {\r\n\t\tcssElements.push(`#${space.id} { ${cssString.join(\" \")} }`);\r\n\t}\r\n\r\n\tif (space.scrollable) {\r\n\t\tcssElements.push(`#${space.id} > .spaces-space-inner { overflow: auto; touch-action: auto; }`);\r\n\t}\r\n\r\n\tlet handleOffset = 0;\r\n\tconst touchHandleSize = space.touchHandleSize / 2 - space.handleSize / 2;\r\n\r\n\tswitch (space.handlePlacement) {\r\n\t\tcase ResizeHandlePlacement.Inside:\r\n\t\tcase ResizeHandlePlacement.OverlayInside:\r\n\t\t\thandleOffset = space.handleSize;\r\n\t\t\tbreak;\r\n\t\tcase ResizeHandlePlacement.OverlayBoundary:\r\n\t\t\thandleOffset = space.handleSize / 2;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tif (space.canResizeLeft) {\r\n\t\tcssElements.push(\r\n\t\t\t`#${space.id}-m { left: calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleOffset}px); width: ${space.handleSize}px; }`,\r\n\t\t);\r\n\t\tcssElements.push(`#${space.id}-m:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t}\r\n\r\n\tif (space.canResizeTop) {\r\n\t\tcssElements.push(\r\n\t\t\t`#${space.id}-m { top: calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleOffset}px); height: ${space.handleSize}px; }`,\r\n\t\t);\r\n\t\tcssElements.push(`#${space.id}-m:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: 0; right: 0; }`);\r\n\t}\r\n\r\n\tif (space.canResizeRight) {\r\n\t\tcssElements.push(\r\n\t\t\t`#${space.id}-m { right: calc(${css(space.right, true)} + ${css(space.width, true)} - ${handleOffset}px); width: ${\r\n\t\t\t\tspace.handleSize\r\n\t\t\t}px; }`,\r\n\t\t);\r\n\t\tcssElements.push(`#${space.id}-m:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t}\r\n\r\n\tif (space.canResizeBottom) {\r\n\t\tcssElements.push(\r\n\t\t\t`#${space.id}-m { bottom: calc(${css(space.bottom, true)} + ${css(space.height, true)} - ${handleOffset}px); height: ${\r\n\t\t\t\tspace.handleSize\r\n\t\t\t}px; }`,\r\n\t\t);\r\n\t\tcssElements.push(`#${space.id}-m:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: 0; right: 0; }`);\r\n\t}\r\n\r\n\treturn cssElements.join(\" \");\r\n}\r\n\r\nexport function updateStyleDefinition(space: ISpaceDefinition) {\r\n\tconst definition = styleDefinition(space);\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\r\n\tif (existing) {\r\n\t\tif (existing.innerHTML !== definition) {\r\n\t\t\texisting.innerHTML = definition;\r\n\t\t}\r\n\t} else {\r\n\t\tconst newStyle = document.createElement(\"style\");\r\n\t\tnewStyle.id = `style_${space.id}`;\r\n\t\tnewStyle.innerHTML = definition;\r\n\t\tdocument.head.appendChild(newStyle);\r\n\t}\r\n}\r\n\r\nexport function removeStyleDefinition(space: ISpaceDefinition) {\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\tif (existing) {\r\n\t\tdocument.head.removeChild(existing);\r\n\t}\r\n}\r\n","import { SyntheticEvent } from \"react\";\r\nimport { ISpaceDefinition, ISize, ResizeType, Orientation, ISpaceStore } from \"./core-types\";\r\nimport { throttle, coalesce } from \"./core-utils\";\r\n\r\nconst RESIZE_THROTTLE = 0;\r\n\r\nexport enum MoveEvent {\r\n\tMouse = \"mousemove\",\r\n\tTouch = \"touchmove\",\r\n}\r\n\r\nexport enum EndEvent {\r\n\tMouse = \"mouseup\",\r\n\tTouch = \"touchend\",\r\n}\r\n\r\nexport interface IResizeChange {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport function createResize(store: ISpaceStore) {\r\n\tfunction onResize(\r\n\t\tspace: ISpaceDefinition,\r\n\t\ttargetSize: ISize,\r\n\t\tresizeType: ResizeType,\r\n\t\tstartSize: number,\r\n\t\toriginalX: number,\r\n\t\toriginalY: number,\r\n\t\tx: number,\r\n\t\ty: number,\r\n\t\tminimumAdjust: number,\r\n\t\tmaximumAdjust: number | undefined,\r\n\t) {\r\n\t\tlet adjustment =\r\n\t\t\tstartSize +\r\n\t\t\t(space.orientation === Orientation.Horizontal\r\n\t\t\t\t? resizeType === ResizeType.Left\r\n\t\t\t\t\t? originalX - x\r\n\t\t\t\t\t: x - originalX\r\n\t\t\t\t: resizeType === ResizeType.Top\r\n\t\t\t\t? originalY - y\r\n\t\t\t\t: y - originalY);\r\n\r\n\t\tif (adjustment < minimumAdjust) {\r\n\t\t\tadjustment = minimumAdjust;\r\n\t\t} else {\r\n\t\t\tif (maximumAdjust) {\r\n\t\t\t\tif (adjustment > maximumAdjust) {\r\n\t\t\t\t\tadjustment = maximumAdjust;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (adjustment !== targetSize.resized) {\r\n\t\t\ttargetSize.resized = adjustment;\r\n\t\t\tstore.updateStyles(space);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tstartResize<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\r\n\t\t\tresizeType: ResizeType,\r\n\t\t\te: T,\r\n\t\t\tspace: ISpaceDefinition,\r\n\t\t\ttargetSize: ISize,\r\n\t\t\tendEvent: EndEvent,\r\n\t\t\tmoveEvent: MoveEvent,\r\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\r\n\t\t) {\r\n\t\t\tif (space.onResizeStart) {\r\n\t\t\t\tconst result = space.onResizeStart();\r\n\t\t\t\tif (typeof result === \"boolean\" && !result) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst originalCoords = getCoords(e);\r\n\r\n\t\t\tspace.resizing = true;\r\n\t\t\tspace.updateParent();\r\n\r\n\t\t\tconst rect = space.element.getBoundingClientRect();\r\n\t\t\tconst size = space.orientation === Orientation.Horizontal ? rect.width : rect.height;\r\n\t\t\tconst startSize = targetSize.resized;\r\n\t\t\tconst minimumAdjust = coalesce(space.minimumSize, 20)! - size + targetSize.resized;\r\n\t\t\tconst maximumAdjust = space.maximumSize ? space.maximumSize - size + targetSize.resized : undefined;\r\n\r\n\t\t\tlet lastX = 0;\r\n\t\t\tlet lastY = 0;\r\n\t\t\tlet moved = false;\r\n\r\n\t\t\tconst resize = (x: number, y: number) =>\r\n\t\t\t\tonResize(space, targetSize, resizeType, startSize, originalCoords.x, originalCoords.y, x, y, minimumAdjust, maximumAdjust);\r\n\r\n\t\t\tconst withPreventDefault = (e: T) => {\r\n\t\t\t\tmoved = true;\r\n\t\t\t\tconst newCoords = getCoords(e);\r\n\t\t\t\tlastX = newCoords.x;\r\n\t\t\t\tlastY = newCoords.y;\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthrottle((x, y) => window.requestAnimationFrame(() => resize(x, y)), RESIZE_THROTTLE)(lastX, lastY);\r\n\t\t\t};\r\n\r\n\t\t\tconst removeListener = () => {\r\n\t\t\t\tif (moved) {\r\n\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (elementsUnderneathPointer && elementsUnderneathPointer.length > 1) {\r\n\t\t\t\t\t// \tconst target = elementsUnderneathPointer[1] as any;\r\n\t\t\t\t\t// \ttarget.submitMessage(e);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\t\twindow.removeEventListener(endEvent, removeListener);\r\n\r\n\t\t\t\tspace.resizing = false;\r\n\t\t\t\tspace.updateParent();\r\n\r\n\t\t\t\tif (space.onResizeEnd) {\r\n\t\t\t\t\tconst currentRect = space.element.getBoundingClientRect();\r\n\t\t\t\t\tspace.onResizeEnd(\r\n\t\t\t\t\t\tMath.floor(resizeType === ResizeType.Left || resizeType === ResizeType.Right ? currentRect.width : currentRect.height),\r\n\t\t\t\t\t\tcurrentRect as DOMRect,\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\twindow.addEventListener(endEvent, removeListener);\r\n\t\t\t//e.preventDefault();\r\n\t\t},\r\n\t};\r\n}\r\n","import { ISpaceDefinition, SizeUnit, AnchorType, Type, Orientation, ISpaceStore, ISpaceProps, CenterType, ResizeHandlePlacement } from \"./core-types\";\r\nimport { EndEvent, MoveEvent, createResize } from \"./core-resizing\";\r\nimport { updateStyleDefinition, removeStyleDefinition, coalesce, adjustmentsEqual } from \"./core-utils\";\r\n\r\nconst spaceDefaults: Partial<ISpaceDefinition> = {\r\n\tid: \"\",\r\n\tzIndex: 0,\r\n\tscrollable: false,\r\n\tresizing: false,\r\n\tcenterContent: \"none\",\r\n\tdimension: { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" },\r\n\thandleSize: 5,\r\n\ttouchHandleSize: 5,\r\n\thandlePlacement: ResizeHandlePlacement.OverlayInside,\r\n\tadjustLeft: () => false,\r\n\tadjustRight: () => false,\r\n\tadjustTop: () => false,\r\n\tadjustBottom: () => false,\r\n\tadjustEdge: () => false,\r\n\tanchoredChildren: () => [],\r\n};\r\n\r\nconst anchorTypes = [AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom];\r\n\r\nfunction getPosition(type: Type) {\r\n\tif (type === Type.ViewPort) {\r\n\t\treturn \"fixed\";\r\n\t}\r\n\tif (type === Type.Fixed) {\r\n\t\treturn \"relative\";\r\n\t}\r\n\treturn \"absolute\";\r\n}\r\n\r\nfunction getOrientation(anchor: AnchorType | undefined) {\r\n\treturn anchor === AnchorType.Bottom || anchor === AnchorType.Top ? Orientation.Vertical : Orientation.Horizontal;\r\n}\r\n\r\nfunction anchorUpdates(space: ISpaceDefinition) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Left,\r\n\t\t\tupdate: space.adjustLeft,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Top,\r\n\t\t\tupdate: space.adjustTop,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Right,\r\n\t\t\tupdate: space.adjustRight,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Bottom,\r\n\t\t\tupdate: space.adjustBottom,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction sizeInfoDefault(size: SizeUnit) {\r\n\treturn { size: size, adjusted: [], resized: 0 };\r\n}\r\n\r\nexport function createStore(): ISpaceStore {\r\n\tlet spaces: ISpaceDefinition[] = [];\r\n\r\n\tconst setSpaces = (newSpaces: ISpaceDefinition[]) => {\r\n\t\tspaces = newSpaces;\r\n\t};\r\n\r\n\tconst getSpace = (id: string) => {\r\n\t\treturn getSpaces().find((s) => s.id === id);\r\n\t};\r\n\r\n\tconst getSpaces = () => spaces;\r\n\r\n\tconst recalcSpaces = (parent: ISpaceDefinition) => {\r\n\t\tconst onlyUnique = (value: number, index: number, self: number[]) => {\r\n\t\t\treturn self.indexOf(value) === index;\r\n\t\t};\r\n\r\n\t\tconst addDefaultOrders = (spaces: ISpaceDefinition[]) => {\r\n\t\t\tlet result: ISpaceDefinition[] = [];\r\n\r\n\t\t\tanchorTypes.forEach((t) => {\r\n\t\t\t\tconst anchoredSpaces = spaces.filter((s) => s.anchor !== undefined && s.anchor === t);\r\n\t\t\t\tconst zIndices = anchoredSpaces.map((s) => s.zIndex).filter(onlyUnique);\r\n\t\t\t\tzIndices.forEach((i) => {\r\n\t\t\t\t\tconst anchoredSpacesInLayer = anchoredSpaces.filter((s) => s.zIndex === i);\r\n\t\t\t\t\tconst orderedSpaces = anchoredSpacesInLayer.filter((c) => c.order !== undefined);\r\n\t\t\t\t\tconst unorderedSpaces = anchoredSpacesInLayer.filter((c) => c.order === undefined);\r\n\t\t\t\t\tvar maxOrder = orderedSpaces.length > 0 ? orderedSpaces.map((a) => a.order!).reduce((a, b) => Math.max(a, b)) : 0;\r\n\t\t\t\t\tresult = [...result, ...[...orderedSpaces, ...unorderedSpaces.map((c, idx) => ({ ...c, ...{ order: maxOrder + idx + 1 } }))]];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn [...result, ...spaces.filter((s) => s.anchor === undefined)];\r\n\t\t};\r\n\r\n\t\tconst orderedSpaces = addDefaultOrders(parent.children);\r\n\t\tfor (var i = 0, len = orderedSpaces.length; i < len; i++) {\r\n\t\t\tconst space = orderedSpaces[i];\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type === Type.Fill) {\r\n\t\t\t\tanchorUpdates(space).forEach((info) => {\r\n\t\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\t\tconst anchoredSpaces = parent.anchoredChildren(orderedSpaces, info.anchor, space.zIndex);\r\n\r\n\t\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (info.update(adjusted)) {\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (space.type === Type.Anchored) {\r\n\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\tconst anchoredSpaces = parent\r\n\t\t\t\t\t.anchoredChildren(orderedSpaces, space.anchor!, space.zIndex)\r\n\t\t\t\t\t.filter((s) => s.id !== space.id && s.order! <= space.order!);\r\n\r\n\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (space.adjustEdge(adjusted)) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst store: ISpaceStore = {\r\n\t\tgetSpaces: getSpaces,\r\n\t\tgetSpace: getSpace,\r\n\t\taddSpace: (space) => {\r\n\t\t\tgetSpaces().push(space);\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children.push(space);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tremoveSpace: (space) => {\r\n\t\t\tsetSpaces(getSpaces().filter((s) => s.id !== space.id));\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children = parentSpace.children.filter((s) => s.id !== space.id);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tremoveStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateStyles: (space) => {\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parent = getSpace(space.parentId);\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\trecalcSpaces(parent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateSpace: (space, props) => {\r\n\t\t\tconst {\r\n\t\t\t\ttype,\r\n\t\t\t\tanchor,\r\n\t\t\t\torder,\r\n\t\t\t\tzIndex,\r\n\t\t\t\tscrollable,\r\n\t\t\t\tposition,\r\n\t\t\t\tcenterContent,\r\n\t\t\t\tminimumSize,\r\n\t\t\t\tmaximumSize,\r\n\t\t\t\thandleSize,\r\n\t\t\t\ttouchHandleSize,\r\n\t\t\t\thandlePlacement,\r\n\t\t\t} = props;\r\n\t\t\tconst canResizeLeft = (position && position.rightResizable) || false;\r\n\t\t\tconst canResizeRight = (position && position.leftResizable) || false;\r\n\t\t\tconst canResizeTop = (position && position.bottomResizable) || false;\r\n\t\t\tconst canResizeBottom = (position && position.topResizable) || false;\r\n\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type !== type) {\r\n\t\t\t\tspace.type = type;\r\n\t\t\t\tspace.position = getPosition(type);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.anchor !== anchor) {\r\n\t\t\t\tspace.anchor = anchor;\r\n\t\t\t\tspace.orientation = getOrientation(anchor);\r\n\t\t\t\tchanged = true;\r\n\r\n\t\t\t\tif (type === Type.Anchored) {\r\n\t\t\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustLeft;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustTop;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustRight;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (space.left.size !== (position && position.left)) {\r\n\t\t\t\tspace.left.size = position && position.left;\r\n\t\t\t\tspace.left.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.right.size !== (position && position.right)) {\r\n\t\t\t\tspace.right.size = position && position.right;\r\n\t\t\t\tspace.right.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.top.size !== (position && position.top)) {\r\n\t\t\t\tspace.top.size = position && position.top;\r\n\t\t\t\tspace.top.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.bottom.size !== (position && position.bottom)) {\r\n\t\t\t\tspace.bottom.size = position && position.bottom;\r\n\t\t\t\tspace.bottom.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.width.size !== (position && position.width)) {\r\n\t\t\t\tspace.width.size = position && position.width;\r\n\t\t\t\tspace.width.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.height.size !== (position && position.height)) {\r\n\t\t\t\tspace.height.size = position && position.height;\r\n\t\t\t\tspace.height.resized = 0;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.order, 0) !== coalesce(order, 0)) {\r\n\t\t\t\tspace.order = coalesce(order, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.zIndex, 0) !== coalesce(zIndex, 0)) {\r\n\t\t\t\tspace.zIndex = coalesce(zIndex, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.scrollable, false) !== coalesce(scrollable, false)) {\r\n\t\t\t\tspace.scrollable = coalesce(scrollable, false)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.minimumSize !== minimumSize) {\r\n\t\t\t\tspace.minimumSize = minimumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.maximumSize !== maximumSize) {\r\n\t\t\t\tspace.maximumSize = maximumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.centerContent, CenterType.None) !== coalesce(centerContent, CenterType.None)) {\r\n\t\t\t\tspace.centerContent = coalesce(centerContent, CenterType.None)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handleSize !== handleSize) {\r\n\t\t\t\tspace.handleSize = handleSize || spaceDefaults.handleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.touchHandleSize !== touchHandleSize) {\r\n\t\t\t\tspace.touchHandleSize = touchHandleSize || spaceDefaults.touchHandleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handlePlacement !== handlePlacement) {\r\n\t\t\t\tspace.handlePlacement = handlePlacement || spaceDefaults.handlePlacement!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottom !== canResizeBottom) {\r\n\t\t\t\tspace.canResizeBottom = canResizeBottom;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTop !== canResizeTop) {\r\n\t\t\t\tspace.canResizeTop = canResizeTop;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeLeft !== canResizeLeft) {\r\n\t\t\t\tspace.canResizeLeft = canResizeLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeRight !== canResizeRight) {\r\n\t\t\t\tspace.canResizeRight = canResizeRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tif (space.parentId) {\r\n\t\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateSpace: () => ({} as ISpaceDefinition),\r\n\t\tstartMouseResize: () => null,\r\n\t\tstartTouchResize: () => null,\r\n\t};\r\n\r\n\tconst resize = createResize(store);\r\n\r\n\tstore.createSpace = (parentId: string | undefined, props: ISpaceProps, update: () => void) => {\r\n\t\tconst { position, anchor, type, ...commonProps } = props;\r\n\t\tconst canResizeLeft = (position && position.rightResizable) || false;\r\n\t\tconst canResizeRight = (position && position.leftResizable) || false;\r\n\t\tconst canResizeTop = (position && position.bottomResizable) || false;\r\n\t\tconst canResizeBottom = (position && position.topResizable) || false;\r\n\r\n\t\tconst newSpace: ISpaceDefinition = {\r\n\t\t\t...spaceDefaults,\r\n\t\t\t...commonProps,\r\n\t\t\t...{\r\n\t\t\t\tstore: store,\r\n\t\t\t\tupdate: update,\r\n\t\t\t\tupdateParent: () => {\r\n\t\t\t\t\tif (parentId) {\r\n\t\t\t\t\t\tconst parentSpace = store.getSpace(parentId);\r\n\t\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\t\tparentSpace.update();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tparentId: parentId,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tanchor: anchor,\r\n\t\t\t\ttype: type,\r\n\t\t\t\torientation: getOrientation(anchor),\r\n\t\t\t\tposition: getPosition(type),\r\n\t\t\t\tleft: sizeInfoDefault(position && position.left),\r\n\t\t\t\tright: sizeInfoDefault(position && position.right),\r\n\t\t\t\ttop: sizeInfoDefault(position && position.top),\r\n\t\t\t\tbottom: sizeInfoDefault(position && position.bottom),\r\n\t\t\t\twidth: sizeInfoDefault(position && position.width),\r\n\t\t\t\theight: sizeInfoDefault(position && position.height),\r\n\t\t\t\tcanResizeLeft: canResizeLeft,\r\n\t\t\t\tcanResizeRight: canResizeRight,\r\n\t\t\t\tcanResizeTop: canResizeTop,\r\n\t\t\t\tcanResizeBottom: canResizeBottom,\r\n\t\t\t},\r\n\t\t} as ISpaceDefinition;\r\n\r\n\t\tnewSpace.anchoredChildren = (children, anchor, zIndex) => {\r\n\t\t\treturn children.filter((s) => s.type === Type.Anchored && s.anchor === anchor && s.zIndex === zIndex);\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustLeft = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.left.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.left.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustRight = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.right.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.right.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustTop = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.top.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.top.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustBottom = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.bottom.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.bottom.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tif (type === Type.Anchored) {\r\n\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustLeft;\r\n\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustTop;\r\n\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustRight;\r\n\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustBottom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newSpace;\r\n\t};\r\n\r\n\tstore.startMouseResize = (resizeType, space, size, event) => {\r\n\t\tresize.startResize(resizeType, event, space, size, EndEvent.Mouse, MoveEvent.Mouse, (e) => ({\r\n\t\t\tx: e.clientX,\r\n\t\t\ty: e.clientY,\r\n\t\t}));\r\n\t};\r\n\r\n\tstore.startTouchResize = (resizeType, space, size, event) => {\r\n\t\tresize.startResize(resizeType, event, space, size, EndEvent.Touch, MoveEvent.Touch, (e) => ({\r\n\t\t\tx: e.touches[0].clientX,\r\n\t\t\ty: e.touches[0].clientY,\r\n\t\t}));\r\n\t};\r\n\r\n\treturn store;\r\n}\r\n","import * as React from \"react\";\r\nimport { createStore } from \"./core\";\r\nimport { ISpaceProps, ISpaceStore, ISpaceDefinition, IPositionalProps, ResizeType, CenterType } from \"./core-types\";\r\nimport { coalesce, shortuuid } from \"./core-utils\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nexport const ParentContext = React.createContext<string | undefined>(undefined);\r\nexport const DOMRectContext = React.createContext<DOMRect | undefined>(undefined);\r\nexport const LayerContext = React.createContext<number | undefined>(undefined);\r\nexport const OptionsContext = React.createContext<IReactSpacesOptions>({});\r\nexport const currentStore = createStore();\r\n\r\nexport const commonProps = {\r\n\tid: PropTypes.string,\r\n\tclassName: PropTypes.string,\r\n\tstyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n\tas: PropTypes.string,\r\n\tcenterContent: PropTypes.oneOf([CenterType.None, CenterType.Vertical, CenterType.HorizontalVertical]),\r\n\tzIndex: PropTypes.number,\r\n\tscrollable: PropTypes.bool,\r\n\ttrackSize: PropTypes.bool,\r\n\tonClick: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonTouchStart: PropTypes.func,\r\n\tonTouchMove: PropTypes.func,\r\n\tonTouchEnd: PropTypes.func,\r\n};\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean\r\n}\r\n\r\nexport interface IReactEvents {\r\n\tonClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonDoubleClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseDown?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseEnter?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseLeave?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseMove?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchMove?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchEnd?: (event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport function useForceUpdate() {\r\n\tconst [, setTick] = React.useState(0);\r\n\tconst update = React.useCallback(() => {\r\n\t\tsetTick((tick) => tick + 1);\r\n\t}, []);\r\n\treturn update;\r\n}\r\n\r\nexport function useSpace(props: ISpaceProps) {\r\n\tconst store = currentStore;\r\n\tconst update = useForceUpdate();\r\n\tconst parent = React.useContext(ParentContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst { debug } = React.useContext(OptionsContext);\r\n\tconst [spaceId] = React.useState(props.id || `s${shortuuid()}`);\r\n\tconst elementRef = React.useRef<HTMLElement>();\r\n\tconst resizeSensor = React.useRef<ResizeSensor>();\r\n\tconst [domRect, setDomRect] = React.useState<DOMRect>();\r\n\r\n\tlet space = store.getSpace(spaceId)!;\r\n\r\n\tif (debug) {\r\n\t\tconsole.table(store.getSpaces());\r\n\t}\r\n\r\n\tconst parsedProps = {\r\n\t\t...props,\r\n\t\t...{\r\n\t\t\tid: spaceId,\r\n\t\t\tzIndex: coalesce(props.zIndex, layer),\r\n\t\t},\r\n\t};\r\n\r\n\tif (!space) {\r\n\t\tspace = store.createSpace(parent, parsedProps, update);\r\n\t\tstore.addSpace(space);\r\n\t} else {\r\n\t\tstore.updateSpace(space, parsedProps);\r\n\t}\r\n\r\n\tconst resizeHandles = useSpaceResizeHandles(store, space, props.position);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst rect = elementRef.current!.getBoundingClientRect() as DOMRect;\r\n\t\tspace!.dimension = {\r\n\t\t\t...rect,\r\n\t\t\t...{\r\n\t\t\t\tleft: Math.floor(rect.left),\r\n\t\t\t\ttop: Math.floor(rect.top),\r\n\t\t\t\tright: Math.floor(rect.right),\r\n\t\t\t\tbottom: Math.floor(rect.bottom),\r\n\t\t\t\twidth: Math.floor(rect.width),\r\n\t\t\t\theight: Math.floor(rect.height),\r\n\t\t\t\tx: Math.floor(rect.x),\r\n\t\t\t\ty: Math.floor(rect.y),\r\n\t\t\t},\r\n\t\t};\r\n\t\tsetDomRect(space!.dimension);\r\n\r\n\t\tif (props.trackSize) {\r\n\t\t\tresizeSensor.current = new ResizeSensor(elementRef.current!, (size) => {\r\n\t\t\t\tspace!.dimension = {\r\n\t\t\t\t\t...rect,\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\twidth: Math.floor(size.width),\r\n\t\t\t\t\t\theight: Math.floor(size.height),\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tsetDomRect(space!.dimension);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tresizeSensor.current && resizeSensor.current.detach();\r\n\t\t\tstore.removeSpace(space!);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn { space: space, resizeHandles: resizeHandles, domRect: domRect, elementRef: elementRef };\r\n}\r\n\r\ninterface IResizeHandleProps {\r\n\tid?: string;\r\n\tkey: string | number;\r\n\tclassName?: string;\r\n\tonMouseDown: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart: (e: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport function useSpaceResizeHandles(store: ISpaceStore, space: ISpaceDefinition, position: IPositionalProps | undefined) {\r\n\tconst mouseHandles: IResizeHandleProps[] = [];\r\n\r\n\tif (position && position.rightResizable) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-m`,\r\n\t\t\tkey: \"right\",\r\n\t\t\tclassName: `spaces-resize-handle resize-right`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Right, space, space.width, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Right, space, space.width, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (position && position.leftResizable) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-m`,\r\n\t\t\tkey: \"left\",\r\n\t\t\tclassName: `spaces-resize-handle resize-left`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Left, space, space.width, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Left, space, space.width, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (position && position.topResizable) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-m`,\r\n\t\t\tkey: \"top\",\r\n\t\t\tclassName: `spaces-resize-handle resize-top`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Top, space, space.height, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Top, space, space.height, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (position && position.bottomResizable) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-m`,\r\n\t\t\tkey: \"bottom\",\r\n\t\t\tclassName: `spaces-resize-handle resize-bottom`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Bottom, space, space.height, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Bottom, space, space.height, event),\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tmouseHandles\r\n\t};\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport const Centered: React.FC = (props) => <div className={`spaces-centered`}>{props.children}</div>;\r\n","import * as React from \"react\";\r\n\r\nexport const CenteredVertically: React.FC = (props) => <div className={`spaces-centered-vertically`}>{props.children}</div>;\r\n","import { ISpaceProps, CenterType, ResizeHandlePlacement, AnchorType } from \"../core-types\";\r\nimport { useSpace, ParentContext, LayerContext, DOMRectContext } from \"../core-react\";\r\nimport * as React from \"react\";\r\nimport { Centered } from \"./Centered\";\r\nimport { CenteredVertically } from \"./CenteredVertically\";\r\nimport { shortuuid } from \"../core-utils\";\r\n\r\nfunction applyCentering(children: React.ReactNode, centerType: CenterType | undefined) {\r\n\tswitch (centerType) {\r\n\t\tcase CenterType.Vertical:\r\n\t\t\treturn <CenteredVertically>{children}</CenteredVertically>;\r\n\t\tcase CenterType.HorizontalVertical:\r\n\t\t\treturn <Centered>{children}</Centered>;\r\n\t}\r\n\treturn children;\r\n}\r\n\r\nexport class Space extends React.Component<ISpaceProps> {\r\n\tpublic render() {\r\n\t\treturn <SpaceInner {...this.props} wrapperInstance={this} />;\r\n\t}\r\n}\r\n\r\nconst SpaceInner: React.FC<ISpaceProps & { wrapperInstance: Space }> = (props) => {\r\n\tif (!props.id && !props.wrapperInstance[\"_react_spaces_uniqueid\"]) {\r\n\t\tprops.wrapperInstance[\"_react_spaces_uniqueid\"] = `s${shortuuid()}`;\r\n\t}\r\n\r\n\tconst {\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonDoubleClick,\r\n\t\tonMouseDown,\r\n\t\tonMouseEnter,\r\n\t\tonMouseLeave,\r\n\t\tonMouseMove,\r\n\t\tonTouchStart,\r\n\t\tonTouchMove,\r\n\t\tonTouchEnd,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\tconst events = {\r\n\t\tonClick: onClick,\r\n\t\tonDoubleClick: onDoubleClick,\r\n\t\tonMouseDown: onMouseDown,\r\n\t\tonMouseEnter: onMouseEnter,\r\n\t\tonMouseLeave: onMouseLeave,\r\n\t\tonMouseMove: onMouseMove,\r\n\t\tonTouchStart: onTouchStart,\r\n\t\tonTouchMove: onTouchMove,\r\n\t\tonTouchEnd: onTouchEnd,\r\n\t};\r\n\r\n\tconst { space, domRect, elementRef, resizeHandles } = useSpace({\r\n\t\t...props,\r\n\t\t...{ id: props.id || props.wrapperInstance[\"_react_spaces_uniqueid\"] },\r\n\t});\r\n\r\n\tReact.useEffect(() => {\r\n\t\tspace.element = elementRef.current!;\r\n\t}, []);\r\n\r\n\tconst userClasses = className ? className.split(\" \").map((c) => c.trim()) : [];\r\n\r\n\tconst outerClasses = [\r\n\t\t...[\"spaces-space\", space.children.find((s) => s.resizing) ? \"spaces-resizing\" : undefined],\r\n\t\t...userClasses.map((c) => `${c}-container`),\r\n\t].filter((c) => c);\r\n\r\n\tconst innerClasses = [...[\"spaces-space-inner\"], ...userClasses];\r\n\r\n\tlet innerStyle = style;\r\n\tif (space.handlePlacement === ResizeHandlePlacement.Inside) {\r\n\t\tinnerStyle = {\r\n\t\t\t...style,\r\n\t\t\t...{\r\n\t\t\t\tleft: space.anchor === AnchorType.Right ? space.handleSize : undefined,\r\n\t\t\t\tright: space.anchor === AnchorType.Left ? space.handleSize : undefined,\r\n\t\t\t\ttop: space.anchor === AnchorType.Bottom ? space.handleSize : undefined,\r\n\t\t\t\tbottom: space.anchor === AnchorType.Top ? space.handleSize : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tconst centeredContent = applyCentering(children, props.centerContent);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{resizeHandles.mouseHandles.map((r) => (\r\n\t\t\t\t<div {...r} />\r\n\t\t\t))}\r\n\t\t\t{React.createElement(\r\n\t\t\t\tprops.as || \"div\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\tid: space.id,\r\n\t\t\t\t\t\tref: elementRef,\r\n\t\t\t\t\t\tclassName: outerClasses.join(\" \"),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...events,\r\n\t\t\t\t},\r\n\t\t\t\t<div className={innerClasses.join(\" \")} style={innerStyle}>\r\n\t\t\t\t\t<ParentContext.Provider value={space.id}>\r\n\t\t\t\t\t\t<LayerContext.Provider value={undefined}>\r\n\t\t\t\t\t\t\t<DOMRectContext.Provider value={domRect}>{centeredContent}</DOMRectContext.Provider>\r\n\t\t\t\t\t\t</LayerContext.Provider>\r\n\t\t\t\t\t</ParentContext.Provider>\r\n\t\t\t\t</div>,\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","import { ICommonProps, SizeUnit, Type, AnchorType, ResizeHandlePlacement } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\ninterface IAnchorProps extends ICommonProps {\r\n\tsize: SizeUnit;\r\n\torder?: number;\r\n\tresizable?: boolean;\r\n\thandleSize?: number;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const anchoredProps = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tsize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t\torder: PropTypes.number,\r\n\t\tresizable: PropTypes.bool,\r\n\t\thandleSize: PropTypes.number,\r\n\t\thandlePlacement: PropTypes.oneOf([ResizeHandlePlacement.Inside, ResizeHandlePlacement.OverlayBoundary, ResizeHandlePlacement.OverlayInside]),\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n\r\nexport const resizableProps = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tsize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t\torder: PropTypes.number,\r\n\t\thandleSize: PropTypes.number,\r\n\t\thandlePlacement: PropTypes.oneOf([ResizeHandlePlacement.Inside, ResizeHandlePlacement.OverlayBoundary, ResizeHandlePlacement.OverlayInside]),\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n\r\nexport const LeftResizable: React.FC<Omit<IAnchorProps, \"resizable\">> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Left} position={{ left: 0, top: 0, bottom: 0, rightResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeftResizable.propTypes = resizableProps;\r\n\r\nexport const Left: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Left}\r\n\t\tposition={{ left: 0, top: 0, bottom: 0, rightResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeft.propTypes = anchoredProps;\r\n\r\nexport const TopResizable: React.FC<Omit<IAnchorProps, \"resizable\">> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Top} position={{ left: 0, top: 0, right: 0, bottomResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTopResizable.propTypes = resizableProps;\r\n\r\nexport const Top: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Top}\r\n\t\tposition={{ left: 0, top: 0, right: 0, bottomResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTop.propTypes = anchoredProps;\r\n\r\nexport const RightResizable: React.FC<Omit<IAnchorProps, \"resizable\">> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Right} position={{ bottom: 0, top: 0, right: 0, leftResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRightResizable.propTypes = resizableProps;\r\n\r\nexport const Right: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Right}\r\n\t\tposition={{ bottom: 0, top: 0, right: 0, leftResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRight.propTypes = anchoredProps;\r\n\r\nexport const BottomResizable: React.FC<Omit<IAnchorProps, \"resizable\">> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Bottom} position={{ bottom: 0, left: 0, right: 0, topResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottomResizable.propTypes = resizableProps;\r\n\r\nexport const Bottom: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Bottom}\r\n\t\tposition={{ bottom: 0, left: 0, right: 0, topResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottom.propTypes = anchoredProps;\r\n","import { ICommonProps, Type, SizeUnit, IPositionalProps, AnchorType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\ninterface ICustomProps extends ICommonProps {\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n\tisPositioned?: boolean;\r\n\tanchor?: AnchorType;\r\n\tanchorSize?: SizeUnit;\r\n\tresizable?: boolean;\r\n\thandleSize?: number;\r\n\toverlayHandle?: boolean;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const Custom: React.FC<ICustomProps> = ({\r\n\tchildren,\r\n\tleft,\r\n\ttop,\r\n\tright,\r\n\tbottom,\r\n\twidth,\r\n\theight,\r\n\tanchorSize,\r\n\tanchor,\r\n\tisPositioned,\r\n\tresizable,\r\n\t...props\r\n}) => {\r\n\tlet position: IPositionalProps;\r\n\tlet type = Type.Positioned;\r\n\r\n\tif (!isPositioned) {\r\n\t\tif (anchor === AnchorType.Left) {\r\n\t\t\tposition = { left: 0, top: 0, bottom: 0, width: anchorSize, right: undefined, rightResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\tposition = { right: 0, top: 0, bottom: 0, width: anchorSize, left: undefined, leftResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\tposition = { left: 0, top: 0, right: 0, height: anchorSize, bottom: undefined, bottomResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\tposition = { left: 0, bottom: 0, right: 0, height: anchorSize, top: undefined, topResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else {\r\n\t\t\tposition = { left: 0, top: 0, bottom: 0, right: 0, width: undefined, height: undefined };\r\n\t\t\ttype = Type.Fill;\r\n\t\t}\r\n\t} else {\r\n\t\tposition = { left: left, top: top, right: right, bottom: bottom, width: width, height: height };\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Space {...props} type={type} anchor={anchor} position={position}>\r\n\t\t\t{children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nCustom.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tisPositioned: PropTypes.bool,\r\n\t\tanchor: PropTypes.oneOf([AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom]),\r\n\t\tanchorSize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizable: PropTypes.bool,\r\n\t\thandleSize: PropTypes.number,\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n","import { ICommonProps, Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\nexport const Fill: React.FC<ICommonProps> = (props) => (\r\n\t<Space {...props} type={Type.Fill} position={{ left: 0, top: 0, right: 0, bottom: 0 }}>\r\n\t\t{props.children}\r\n\t</Space>\r\n);\r\n\r\nFill.propTypes = commonProps;\r\n","import { ICommonProps, SizeUnit, Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\ninterface IFixedProps extends ICommonProps {\r\n\twidth?: SizeUnit;\r\n\theight: SizeUnit;\r\n}\r\n\r\nexport const Fixed: React.FC<IFixedProps> = ({ width, height, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.Fixed} position={{ width: width, height: height }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nFixed.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { LayerContext } from \"../core-react\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nexport const Layer: React.FC<{ zIndex: number }> = (props) => <LayerContext.Provider value={props.zIndex}>{props.children}</LayerContext.Provider>;\r\n\r\nLayer.propTypes = {\r\n\tzIndex: PropTypes.number.isRequired,\r\n};\r\n","import { ICommonProps, Type, SizeUnit } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\ninterface IPositionedProps extends ICommonProps {\r\n\tleft?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n\twidth?: SizeUnit;\r\n\theight?: SizeUnit;\r\n\tresizable?: boolean;\r\n}\r\n\r\nexport const Positioned: React.FC<IPositionedProps> = ({ left, top, right, bottom, width, height, resizable, ...props }) => (\r\n\t<Space {...props} type={Type.Positioned} position={{ left: left, top: top, right: right, bottom: bottom, width: width, height: height }}>\r\n\t\t{props.children}\r\n\t</Space>\r\n);\r\n\r\nPositioned.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizable: PropTypes.bool,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { DOMRectContext } from \"../core-react\";\r\n\r\ninterface ISpaceInfoProps {\r\n\tchildren: (info: DOMRect) => JSX.Element;\r\n}\r\n\r\nexport const Info: React.FC<ISpaceInfoProps> = (props) => {\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\r\n\tif (domRect) {\r\n\t\treturn props.children(domRect);\r\n\t}\r\n\r\n\treturn props.children({ left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" });\r\n};\r\n","import { ICommonProps, Type, SizeUnit } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps } from \"../core-react\";\r\n\r\ninterface IViewPortProps extends ICommonProps {\r\n\tleft?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n}\r\n\r\nexport const ViewPort: React.FC<IViewPortProps> = ({ left, top, right, bottom, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.ViewPort} position={{ left: left || 0, top: top || 0, right: right || 0, bottom: bottom || 0 }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nViewPort.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { IReactSpacesOptions, OptionsContext } from \"../core-react\";\r\n\r\nexport const Options: React.FC<IReactSpacesOptions> = ({ children, ...opts }) => {\r\n\treturn <OptionsContext.Provider value={opts}>{children}</OptionsContext.Provider>;\r\n};\r\n"],"names":["css","React.createContext","PropTypes.string","PropTypes.oneOfType","PropTypes.object","PropTypes.array","PropTypes.oneOf","PropTypes.number","PropTypes.bool","PropTypes.func","React.useState","React.useCallback","React.useContext","React.useRef","React.useEffect","React.createElement","React.Component"],"mappings":"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"}